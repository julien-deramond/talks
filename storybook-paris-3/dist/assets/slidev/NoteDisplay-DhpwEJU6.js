import{d as M,z as H,t as B,E as P,n as T,a8 as z,o as v,b as y,i as g,e as E,x as q}from"../modules/vue-LRxAorHn.js";import{C as N,_ as I}from"../index-DWJ0UZ1z.js";const d="slidev-note-fade",r="slidev-note-click-mark",j=M({__name:"NoteDisplay",props:{class:{type:[String,Array],required:!1},noteHtml:{type:String,required:!1},note:{type:String,required:!1},placeholder:{type:String,required:!1},clicksContext:{type:null,required:!1},autoScroll:{type:Boolean,required:!1}},emits:["markerDblclick","markerClick"],setup(h,{expose:C,emit:c}){C();const s=h,p=c,k=H(()=>{var l;return s.clicksContext!=null&&((l=s.noteHtml)==null?void 0:l.includes("slidev-note-click-mark"))}),a=B(null);function _(){var w;if(!a.value||!k.value)return;const l=Array.from(a.value.querySelectorAll(`.${r}`)),n=+(((w=s.clicksContext)==null?void 0:w.current)??N),i=n<0||n>=N,S=new Set;function b(e){!e||e===a.value||(S.add(e),e.parentElement&&b(e.parentElement))}const L=new Map;for(const e of l){const t=e.parentElement,o=Number(e.dataset.clicks);L.set(o,e),b(t),Array.from(t.childNodes).forEach(m=>{if(m.nodeType===3){const A=document.createElement("span");A.textContent=m.textContent,t.insertBefore(A,m),m.remove()}})}const D=Array.from(a.value.querySelectorAll("*"));let u=0;const f=new Map;for(const e of D)f.has(u)||f.set(u,[]),f.get(u).push(e),e.classList.contains(r)&&(u=Number(e.dataset.clicks)||u+1);for(const[e,t]of f)i?t.forEach(o=>o.classList.remove(d)):t.forEach(o=>o.classList.toggle(d,S.has(o)?!1:e!==n));for(const[e,t]of L)t.classList.remove(d),t.classList.toggle(`${r}-past`,i?!1:e<n),t.classList.toggle(`${r}-active`,i?!1:e===n),t.classList.toggle(`${r}-next`,i?!1:e===n+1),t.classList.toggle(`${r}-future`,i?!1:e>n+1),t.ondblclick=o=>{p("markerDblclick",o,e),!o.defaultPrevented&&(s.clicksContext.current=e,o.stopPropagation(),o.stopImmediatePropagation())},t.onclick=o=>{p("markerClick",o,e)},s.autoScroll&&e===n&&t.scrollIntoView({block:"center",behavior:"smooth"})}P(()=>{var l;return[s.noteHtml,(l=s.clicksContext)==null?void 0:l.current]},()=>{T(()=>{_()})},{immediate:!0}),z(()=>{_()});const x={props:s,emit:p,withClicks:k,noteDisplay:a,CLASS_FADE:d,CLASS_MARKER:r,highlightNote:_};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),K=["innerHTML"],R=["textContent"],V=["textContent"];function F(h,C,c,s,p,k){return c.noteHtml?(v(),y("div",{key:0,ref:"noteDisplay",class:g(["prose overflow-auto outline-none slidev-note",[s.props.class,s.withClicks?"slidev-note-with-clicks":""]]),innerHTML:c.noteHtml},null,10,K)):c.note?(v(),y("div",{key:1,class:g(["prose overflow-auto outline-none slidev-note",s.props.class])},[E("p",{textContent:q(c.note)},null,8,R)],2)):(v(),y("div",{key:2,class:g(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",s.props.class])},[E("p",{textContent:q(s.props.placeholder||"No notes.")},null,8,V)],2))}const X=I(j,[["render",F],["__file","/Users/ju/talks/storybook-paris-3/node_modules/.pnpm/@slidev+client@0.49.9_@nuxt+kit@3.11.2_rollup@4.22.4__@vue+compiler-sfc@3.4.27_postcss@8.4.47_4i3r2m7ezxrq7qpxifpbimmzgu/node_modules/@slidev/client/internals/NoteDisplay.vue"]]);export{X as N};
