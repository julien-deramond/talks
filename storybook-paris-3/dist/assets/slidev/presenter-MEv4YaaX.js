import{h as Q,i as V,l as W,m as H}from"../modules/unplugin-icons-BGOR5PKN.js";import{d as B,o as r,c as u,i as D,t as E,z as y,E as I,N as U,a8 as K,K as A,aa as J,a2 as X,b,e as o,l as t,k as v,g as q,h as M,x as Y,F as Z,p as $,a as ee}from"../modules/vue-LRxAorHn.js";import{_ as R,a as te,u as oe,e as ne,c as re,d as se,h as ie,s as ae,j as le,k as ce,l as de,m as ue,n as me}from"../index-DWJ0UZ1z.js";import{r as _e,u as pe,o as xe,N as fe,Q as ve,G as Se,S as ke,C as Ce}from"./ContextMenu-DqLo7yBv.js";import{S as ge}from"./SlideWrapper-Dyw-aGKR.js";import{u as he,S as ye}from"./SlideContainer-CRbPGxFP.js";import{N as be,C as we}from"./ClicksSlider-CbGzvEXv.js";import{N as Ne}from"./NoteDisplay-DhpwEJU6.js";import ze from"./DrawingControls-lrq8y8S3.js";import{I as Fe}from"./IconButton-np-GZLgm.js";import{u as Pe}from"./DrawingPreview-D7LxV_5s.js";import"../modules/shiki-RnNLOD1n.js";import"./context-DLOTfryc.js";const Ee=B({__name:"NoteStatic",props:{no:{type:Number,required:!0},class:{type:String,required:!1},clicksContext:{type:null,required:!1}},setup(s,{expose:i}){i();const n=s,{info:e}=he(n.no),c={props:n,info:e,NoteDisplay:Ne};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function Ie(s,i,n,e,c,m){var a,l;return r(),u(e.NoteDisplay,{class:D(e.props.class),note:(a=e.info)==null?void 0:a.note,"note-html":(l=e.info)==null?void 0:l.noteHTML,"clicks-context":n.clicksContext},null,8,["class","note","note-html","clicks-context"])}const qe=R(Ee,[["render",Ie],["__file","/Users/ju/talks/storybook-paris-3/node_modules/.pnpm/@slidev+client@0.49.9_@nuxt+kit@3.11.2_rollup@4.22.4__@vue+compiler-sfc@3.4.27_postcss@8.4.47_4i3r2m7ezxrq7qpxifpbimmzgu/node_modules/@slidev/client/internals/NoteStatic.vue"]]),Me=B({__name:"presenter",setup(s,{expose:i}){i();const n=E();_e(),pe(n);const{clicksContext:e,currentSlideNo:c,currentSlideRoute:m,hasNext:a,nextRoute:l,slides:_,queryClicks:p,getPrimaryClicks:x,total:S}=te(),{isDrawing:N}=Pe();oe({title:`Presenter - ${ae}`});const T=E(!1),{timer:j,resetTimer:L}=ne(),z=y(()=>_.value.map(C=>re(C))),f=y(()=>e.value.current<e.value.total?[m.value,e.value.current+1]:a.value?[l.value,0]:null),k=y(()=>f.value&&z.value[f.value[0].no-1]);I([m,p],()=>{k.value&&(k.value.current=f.value[1])},{immediate:!0});const O=U();K(()=>{const C=n.value.querySelector("#slide-content"),P=A(J()),G=X();I(()=>{if(!G.value||N.value||!ie.value)return;const d=C.getBoundingClientRect(),g=(P.x-d.left)/d.width*100,h=(P.y-d.top)/d.height*100;if(!(g<0||g>100||h<0||h>100))return{x:g,y:h}},d=>{se.cursor=d})});const F={main:n,clicksContext:e,currentSlideNo:c,currentSlideRoute:m,hasNext:a,nextRoute:l,slides:_,queryClicks:p,getPrimaryClicks:x,total:S,isDrawing:N,notesEditing:T,timer:j,resetTimer:L,clicksCtxMap:z,nextFrame:f,nextFrameClicksCtx:k,SideEditor:O,get decreasePresenterFontSize(){return le},get increasePresenterFontSize(){return ce},get presenterLayout(){return de},get presenterNotesFontSize(){return ue},get showEditor(){return me},get onContextMenu(){return xe},SlideWrapper:ge,SlideContainer:ye,NavControls:fe,QuickOverview:ve,NoteEditable:be,NoteStatic:qe,Goto:Se,SlidesShow:ke,DrawingControls:ze,IconButton:Fe,ClicksSlider:we,ContextMenu:Ce};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}}),w=s=>($("data-v-35d582c5"),s=s(),ee(),s),Be={class:"bg-main h-full slidev-presenter"},De={ref:"main",class:"relative grid-section main flex flex-col"},Re=w(()=>o("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1)),Te={class:"relative grid-section next flex flex-col p-2 lg:p-4"},je=w(()=>o("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1)),Le={key:0,class:"grid-section note of-auto"},Oe={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Ge={class:"border-t border-main py-1 px-2 text-sm"},Qe={class:"grid-section bottom flex"},Ve=w(()=>o("div",{"flex-auto":""},null,-1)),We={class:"text-2xl pl-2 pr-6 my-auto tabular-nums"},He={class:"progress-bar"};function Ue(s,i,n,e,c,m){var x;const a=Q,l=V,_=W,p=H;return r(),b(Z,null,[o("div",Be,[o("div",{class:D(["grid-container",`layout${e.presenterLayout}`])},[o("div",De,[t(e.SlideContainer,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:e.onContextMenu},{default:v(()=>[t(e.SlidesShow,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),(r(),u(e.ClicksSlider,{key:(x=e.currentSlideRoute)==null?void 0:x.no,"clicks-context":e.getPrimaryClicks(e.currentSlideRoute),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),Re],512),o("div",Te,[e.nextFrame&&e.nextFrameClicksCtx?(r(),u(e.SlideContainer,{key:"next"},{default:v(()=>[(r(),u(e.SlideWrapper,{key:e.nextFrame[0].no,"clicks-context":e.nextFrameClicksCtx,route:e.nextFrame[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):q("v-if",!0),je]),e.SideEditor&&e.showEditor?(r(),b("div",Le,[t(e.SideEditor)])):(r(),b("div",Oe,[(r(),u(e.NoteStatic,{key:`static-${e.currentSlideNo}`,no:e.currentSlideNo,class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:M({fontSize:`${e.presenterNotesFontSize}em`}),"clicks-context":e.clicksContext},null,8,["no","style","clicks-context"])),o("div",Ge,[t(e.IconButton,{title:"Increase font size",onClick:e.increasePresenterFontSize},{default:v(()=>[t(a)]),_:1},8,["onClick"]),t(e.IconButton,{title:"Decrease font size",onClick:e.decreasePresenterFontSize},{default:v(()=>[t(l)]),_:1},8,["onClick"]),q("v-if",!0)])])),o("div",Qe,[t(e.NavControls,{persist:!0}),Ve,o("div",{class:"timer-btn my-auto relative w-22px h-22px cursor-pointer text-lg",opacity:"50 hover:100",onClick:i[2]||(i[2]=(...S)=>e.resetTimer&&e.resetTimer(...S))},[t(_,{class:"absolute"}),t(p,{class:"absolute opacity-0"})]),o("div",We,Y(e.timer),1)]),(r(),u(e.DrawingControls,{key:2}))],2),o("div",He,[o("div",{class:"progress h-3px bg-primary transition-all",style:M({width:`${(e.currentSlideNo-1)/(e.total-1)*100+1}%`})},null,4)])]),t(e.Goto),t(e.QuickOverview),t(e.ContextMenu)],64)}const it=R(Me,[["render",Ue],["__scopeId","data-v-35d582c5"],["__file","/Users/ju/talks/storybook-paris-3/node_modules/.pnpm/@slidev+client@0.49.9_@nuxt+kit@3.11.2_rollup@4.22.4__@vue+compiler-sfc@3.4.27_postcss@8.4.47_4i3r2m7ezxrq7qpxifpbimmzgu/node_modules/@slidev/client/pages/presenter.vue"]]);export{it as default};
