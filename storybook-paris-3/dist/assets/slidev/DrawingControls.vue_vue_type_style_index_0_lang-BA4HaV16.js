import{d as V,t as $,V as F,aF as K,o as f,b as z,f as N,h as B,C as e,c as C,k as a,l as n,i,e as l,x as R,ae as w,af as A,F as P,ag as j,ax as k,g as L}from"../modules/vue-Dff40p7A.js";import{L as T}from"../modules/shiki-CVFM2M5h.js";import{u as Y}from"./DrawingPreview.vue_vue_type_script_setup_true_lang-B5la-xIR.js";import{_ as o}from"./IconButton.vue_vue_type_script_setup_true_lang-CF6kpNON.js";import{V as x}from"./shortcuts-BbXtgWyz.js";const q=V({__name:"Draggable",props:{storageKey:{},initial:{}},setup(D){const c=D,_=$(null),g=c.initial??{x:0,y:0},b=c.storageKey?F(c.storageKey,g):$(g),{style:h}=K(_,{initialValue:b});return(m,u)=>(f(),z("div",{ref_key:"el",ref:_,class:"fixed",style:B(e(h))},[N(m.$slots,"default")],4))}}),G=l("div",{class:"i-carbon:pen"},null,-1),H=l("svg",{width:"1em",height:"1em",class:"-mt-0.5",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[l("path",{d:"M21.71 3.29a1 1 0 0 0-1.42 0l-18 18a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l18-18a1 1 0 0 0 0-1.42z",fill:"currentColor"})],-1),I=l("div",{class:"i-carbon:arrow-up-right"},null,-1),J=l("div",{class:"i-carbon:radio-button"},null,-1),O=l("div",{class:"i-carbon:checkbox"},null,-1),Q=l("div",{class:"i-carbon:erase"},null,-1),W=l("svg",{viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},[l("line",{x1:"2",y1:"15",x2:"22",y2:"4",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round"}),l("line",{x1:"2",y1:"24",x2:"28",y2:"10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),l("line",{x1:"7",y1:"31",x2:"29",y2:"19",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round"})],-1),X={class:"flex bg-main p-2"},Z={class:"inline-block w-7 text-center"},ee={class:"pt-.5"},se=l("div",{class:"i-carbon:undo"},null,-1),le=l("div",{class:"i-carbon:redo"},null,-1),te=l("div",{class:"i-carbon:trash-can"},null,-1),ae={class:"i-carbon:pin-filled transform -rotate-45"},ne={class:"i-carbon:pin"},ie={class:"i-carbon:error"},oe={class:"i-carbon:close-outline"},we=V({__name:"DrawingControls",setup(D){const{brush:c,canClear:_,canRedo:g,canUndo:b,clear:h,drauu:m,drawingEnabled:u,drawingMode:r,drawingPinned:d,brushColors:M}=Y();function S(){m.undo()}function U(){m.redo()}let y="stylus";function p(v){r.value=v,u.value=!0,v!=="eraseLine"&&(y=v)}function E(v){c.color=v,u.value=!0,r.value=y}return(v,s)=>e(u)||e(d)?(f(),C(q,{key:0,class:i(["flex flex-wrap text-xl p-2 gap-1 rounded-md bg-main shadow transition-opacity duration-200 z-20 border border-main",!e(u)&&e(d)?"opacity-40 hover:opacity-90":""]),"storage-key":"slidev-drawing-pos","initial-x":10,"initial-y":10},{default:a(()=>[n(o,{title:"Draw with stylus",class:i({shallow:e(r)!=="stylus"}),onClick:s[0]||(s[0]=t=>p("stylus"))},{default:a(()=>[G]),_:1},8,["class"]),n(o,{title:"Draw a line",class:i({shallow:e(r)!=="line"}),onClick:s[1]||(s[1]=t=>p("line"))},{default:a(()=>[H]),_:1},8,["class"]),n(o,{title:"Draw an arrow",class:i({shallow:e(r)!=="arrow"}),onClick:s[2]||(s[2]=t=>p("arrow"))},{default:a(()=>[I]),_:1},8,["class"]),n(o,{title:"Draw an ellipse",class:i({shallow:e(r)!=="ellipse"}),onClick:s[3]||(s[3]=t=>p("ellipse"))},{default:a(()=>[J]),_:1},8,["class"]),n(o,{title:"Draw a rectangle",class:i({shallow:e(r)!=="rectangle"}),onClick:s[4]||(s[4]=t=>p("rectangle"))},{default:a(()=>[O]),_:1},8,["class"]),n(o,{title:"Erase",class:i({shallow:e(r)!=="eraseLine"}),onClick:s[5]||(s[5]=t=>p("eraseLine"))},{default:a(()=>[Q]),_:1},8,["class"]),n(x),n(e(T),null,{popper:a(()=>[l("div",X,[l("div",Z,R(e(c).size),1),l("div",ee,[w(l("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>e(c).size=t),type:"range",min:"1",max:"15",onChange:s[7]||(s[7]=t=>r.value=e(y))},null,544),[[A,e(c).size]])])])]),default:a(()=>[n(o,{title:"Adjust stroke width",class:i({shallow:e(r)==="eraseLine"})},{default:a(()=>[W]),_:1},8,["class"])]),_:1}),(f(!0),z(P,null,j(e(M),t=>(f(),C(o,{key:t,title:"Set brush color",class:i(e(c).color===t&&e(r)!=="eraseLine"?"active":"shallow"),onClick:re=>E(t)},{default:a(()=>[l("div",{class:i(["w-6 h-6 transition-all transform border",e(c).color!==t?"rounded-1/2 scale-85 border-white":"rounded-md border-gray-300/50"]),style:B(e(u)?{background:t}:{borderColor:t})},null,6)]),_:2},1032,["class","onClick"]))),128)),n(x),n(o,{title:"Undo",class:i({disabled:!e(b)}),onClick:s[8]||(s[8]=t=>S())},{default:a(()=>[se]),_:1},8,["class"]),n(o,{title:"Redo",class:i({disabled:!e(g)}),onClick:s[9]||(s[9]=t=>U())},{default:a(()=>[le]),_:1},8,["class"]),n(o,{title:"Delete",class:i({disabled:!e(_)}),onClick:s[10]||(s[10]=t=>e(h)())},{default:a(()=>[te]),_:1},8,["class"]),n(x),n(o,{title:e(d)?"Unpin drawing":"Pin drawing",class:i({shallow:!e(d)}),onClick:s[11]||(s[11]=t=>d.value=!e(d))},{default:a(()=>[w(l("div",ae,null,512),[[k,e(d)]]),w(l("div",ne,null,512),[[k,!e(d)]])]),_:1},8,["title","class"]),e(u)?(f(),C(o,{key:0,title:e(d)?"Drawing pinned":"Drawing unpinned",class:i({shallow:!e(u)}),onClick:s[12]||(s[12]=t=>u.value=!e(u))},{default:a(()=>[w(l("div",ie,null,512),[[k,e(d)]]),w(l("div",oe,null,512),[[k,!e(d)]])]),_:1},8,["title","class"])):L("",!0)]),_:1},8,["class"])):L("",!0)}});export{we as _};
